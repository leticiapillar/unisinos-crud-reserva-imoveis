<menu-app></menu-app>

<div class="row">
    <div class="col-md-12">
		
		<h1><small>Cadastro de Imóveis</small></h1>
		<div class="page-header text-center">
			<h1>{{imovel.descricao}}</h1>
		</div>

		<p ng-show="mensagem.length" class="alert alert-info">{{mensagem}}</p>

		<form novalidate name="formulario" class="row col-md-12" ng-submit="submeter()">
            
			<div class="row">
	        	<div class="form-group col-md-6">
		            <label>Proprietário</label>
		            <select name="proprietario" class="form-control" required
		                ng-controller="PessoaListController"
		                ng-model="proprietarioSelecionado._id"
		                ng-options="pessoa._id as pessoa.nome for pessoa in proprietarios">
		                <option value="">Escolha um proprietário</option>
		            </select>
		            <span ng-show="formulario.$submitted && formulario.imovel.$error.required" class="form-control alert-danger">
						Por favor, informe um proprietário
		            </span>
		        </div>
		    </div>
            
			<div class="row">
	        	<div class="form-group col-md-6">
		            <label>Tipo</label>
		            <select name="tipo" class="form-control" required
		                ng-controller="TiposImovelController"
		                ng-model="imovel.tipo"
		                ng-options="tipo._id as tipo.nome for tipo in tiposImovel">
		                <option value="">Escolha um tipo de imovel</option>
		            </select>
		            <span ng-show="formulario.$submitted && formulario.tipo.$error.required" class="form-control alert-danger">
						Por favor, informe o tipo de imovel
		            </span>
                </div>
            </div>
            
			<div class="row">
	        	<div class="form-group col-md-6">
					<label>Descrição</label>
					<input name="descricao" class="form-control" ng-model="imovel.descricao" required ng-maxlength="100">
					<span ng-show = "formulario.$submitted && formulario.descricao.$error.required" class="form-control alert-danger">
						Por favor, informe uma descrição
					</span> 
					<span ng-show="formulario.$submitted && formulario.descricao.$error.maxlength" class="form-control alert-danger">
						No máximo 100 caracteres!
					</span>   
                </div>
            </div>
            
			<div class="row">
	        	<div class="form-group col-md-2">
					<label>Dormitórios</label>
					<input name="qtdDormitorios" class="form-control" ng-model="imovel.qtdDormitorios" required ui-number-mask="0" min="1" max="5">
					<span ng-show = "formulario.$submitted && formulario.qtdDormitorios.$error.required" class="form-control alert-danger">
						Por favor, informe o número de dormitórios
					</span> 
                </div>
	        	<div class="form-group col-md-2">
					<label>Banheiros</label>
					<input name="qtdBanheiros" class="form-control" ng-model="imovel.qtdBanheiros" required ui-number-mask="0" min="1" max="5">
					<span ng-show = "formulario.$submitted && formulario.qtdBanheiros.$error.required" class="form-control alert-danger">
						Por favor, informe o número de banheiros
					</span> 
                </div>
	        	<div class="form-group col-md-2">
					<label>Tamanho(m2)</label>
					<input name="tamanho" class="form-control" ng-model="imovel.tamanho" required ui-number-mask="2">
					<span ng-show = "formulario.$submitted && formulario.tamanho.$error.required" class="form-control alert-danger">
						Por favor, informe o tamanho do imóvel
					</span> 
                </div>
            </div>
            
            <div class="row">
				<div class="form-group col-md-6">
					<label>Endereço</label>
					<input name="endereco" class="form-control" ng-model="imovel.endereco" required ng-maxlength="100">
					<span ng-show = "formulario.$submitted && formulario.endereco.$error.required" class="form-control alert-danger">
						Por favor, informe o endereço
					</span> 
                    <span ng-show="formulario.$submitted && formulario.endereco.$error.maxlength" class="form-control alert-danger">
						No máximo 100 caracteres!
					</span>   
				</div>
            </div>
            
            <div class="row">
				<div class="form-group col-md-3">
					<label>Bairro</label>
					<input name="bairro" class="form-control" ng-model="imovel.bairro" required ng-maxlength="50">
					<span ng-show = "formulario.$submitted && formulario.bairro.$error.required" class="form-control alert-danger">
						Por favor, informe o bairro
					</span> 
					<span ng-show="formulario.$submitted && formulario.endereco.$error.maxlength" class="form-control alert-danger">
						No máximo 50 caracteres!
					</span>   
				</div>
				<div class="form-group col-md-3">
					<label>Cidade</label>
					<input name="cidade" class="form-control" ng-model="imovel.cidade" required ng-maxlength="50">
					<span ng-show = "formulario.$submitted && formulario.cidade.$error.required" class="form-control alert-danger">
						Por favor, informe a cidade
					</span> 
					<span ng-show="formulario.$submitted && formulario.cidade.$error.maxlength" class="form-control alert-danger">
						No máximo 50 caracteres!
					</span>   
				</div>
            </div>
            
            <div class="row">
				<div class="form-group col-md-3">
					<label>CEP</label>
					<input name="cep" class="form-control" ng-model="imovel.cep" required ui-br-cep-mask>
					<span ng-show = "formulario.$submitted && formulario.cep.$error.required" class="form-control alert-danger">
						Por favor, informe o CEP
					</span> 
				</div>
				<div class="form-group col-md-3">
					<label>Estado</label>
                    <select name="estado" class="form-control" required
                        ng-controller="EstadosController"
		                ng-model="imovel.estado"
		                ng-options="state for state in states">
		                <option value="">Escolha um estado</option>
		            </select>
					<span ng-show = "formulario.$submitted && formulario.estado.$error.required" class="form-control alert-danger">
						Por favor, informe o CEP
					</span> 
				</div>
            </div>
            
		    <div class="row col-md-6">
		        <button type="submit" class="btn btn-primary" ng-disabled="formulario.$invalid">
		            Salvar
		        </button>
            	<a href="/imoveis" class="btn btn-link">Cancelar</a>
			</div>
            
 		</form>
	</div>
</div>